#!/usr/bin/env python
import rospy

from vigir_simple_joint_pan.joint_trajectory_pan_control import JointTrajectoryPanControl


if __name__ == "__main__":
	rospy.init_node("simple_joint_pan_node")

	try:
		rospy.sleep(0.5) # ???
	except rospy.exceptions.ROSInterruptException:
		pass

	# required params (raise exception if not set)
	default_joint_config = rospy.get_param('~default_joint_config')
	panning_joint_name = rospy.get_param('~panning_joint_name')

	# optional params
	action_topic = rospy.get_param('~action_topic', 'follow_joint_trajectory')
	acceleration = rospy.get_param('~acceleration', 3.14*5)
	min_angle = rospy.get_param('~min_angle', -0.8)
	max_angle = rospy.get_param('~max_angle', 0.8)
	autostart = rospy.get_param('~autostart', False)

	pan_control = JointTrajectoryPanControl(
		default_joint_config,
		panning_joint_name,
		action_topic,
		acceleration,
		min_angle,
		max_angle,
		autostart
	)
	pan_control.run()